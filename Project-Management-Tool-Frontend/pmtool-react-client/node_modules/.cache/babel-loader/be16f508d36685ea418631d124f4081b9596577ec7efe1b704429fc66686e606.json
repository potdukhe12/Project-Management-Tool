{"ast":null,"code":"import axios from \"axios\";\nimport { GET_ERRORS, SET_CURRENT_USER } from \"./types\";\nimport setJWTToken from \"../securityUtils/setJWTToken\";\nimport jwt_decode from \"jwt-decode\";\nexport const createNewUser = (newUser, history) => async dispatch => {\n  try {\n    await axios.post(\"/api/users/register\", newUser);\n    history.push(\"/login\");\n    dispatch({\n      type: GET_ERRORS,\n      payload: {}\n    });\n  } catch (err) {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  }\n};\nexport const login = LoginRequest => async dispatch => {\n  try {\n    // post => Login Request\n    const res = await axios.post(\"/api/users/login\", LoginRequest);\n    // extract token from res.data\n    const {\n      token\n    } = res.data;\n    // store the token in the localStorage\n    localStorage.setItem(\"jwtToken\", token);\n    // set our token in header ***\n    setJWTToken(token);\n    // decode token on React\n    const decoded = jwt_decode(token);\n    // dispatch to our securityReducer\n    dispatch({\n      type: SET_CURRENT_USER,\n      payload: decoded\n    });\n  } catch (err) {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  }\n};\nexport const logout = () => dispatch => {\n  localStorage.removeItem(\"jwtToken\");\n  setJWTToken(false);\n  dispatch({\n    type: SET_CURRENT_USER,\n    payload: {}\n  });\n};","map":{"version":3,"names":["axios","GET_ERRORS","SET_CURRENT_USER","setJWTToken","jwt_decode","createNewUser","newUser","history","dispatch","post","push","type","payload","err","response","data","login","LoginRequest","res","token","localStorage","setItem","decoded","logout","removeItem"],"sources":["F:/application code/Technoedu intern project/Bharat -Task 1 PMT/pmtool-react-client/src/actions/securityActions.js"],"sourcesContent":["import axios from \"axios\";\nimport { GET_ERRORS, SET_CURRENT_USER } from \"./types\";\nimport setJWTToken from \"../securityUtils/setJWTToken\";\nimport jwt_decode from \"jwt-decode\";\n\nexport const createNewUser = (newUser, history) => async dispatch => {\n  try {\n    await axios.post(\"/api/users/register\", newUser);\n    history.push(\"/login\");\n    dispatch({\n      type: GET_ERRORS,\n      payload: {}\n    });\n  } catch (err) {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  }\n};\n\nexport const login = LoginRequest => async dispatch => {\n  try {\n    // post => Login Request\n    const res = await axios.post(\"/api/users/login\", LoginRequest);\n    // extract token from res.data\n    const { token } = res.data;\n    // store the token in the localStorage\n    localStorage.setItem(\"jwtToken\", token);\n    // set our token in header ***\n    setJWTToken(token);\n    // decode token on React\n    const decoded = jwt_decode(token);\n    // dispatch to our securityReducer\n    dispatch({\n      type: SET_CURRENT_USER,\n      payload: decoded\n    });\n  } catch (err) {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  }\n};\n\nexport const logout = () => dispatch => {\n  localStorage.removeItem(\"jwtToken\");\n  setJWTToken(false);\n  dispatch({\n    type: SET_CURRENT_USER,\n    payload: {}\n  });\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,EAAEC,gBAAgB,QAAQ,SAAS;AACtD,OAAOC,WAAW,MAAM,8BAA8B;AACtD,OAAOC,UAAU,MAAM,YAAY;AAEnC,OAAO,MAAMC,aAAa,GAAGA,CAACC,OAAO,EAAEC,OAAO,KAAK,MAAMC,QAAQ,IAAI;EACnE,IAAI;IACF,MAAMR,KAAK,CAACS,IAAI,CAAC,qBAAqB,EAAEH,OAAO,CAAC;IAChDC,OAAO,CAACG,IAAI,CAAC,QAAQ,CAAC;IACtBF,QAAQ,CAAC;MACPG,IAAI,EAAEV,UAAU;MAChBW,OAAO,EAAE,CAAC;IACZ,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZL,QAAQ,CAAC;MACPG,IAAI,EAAEV,UAAU;MAChBW,OAAO,EAAEC,GAAG,CAACC,QAAQ,CAACC;IACxB,CAAC,CAAC;EACJ;AACF,CAAC;AAED,OAAO,MAAMC,KAAK,GAAGC,YAAY,IAAI,MAAMT,QAAQ,IAAI;EACrD,IAAI;IACF;IACA,MAAMU,GAAG,GAAG,MAAMlB,KAAK,CAACS,IAAI,CAAC,kBAAkB,EAAEQ,YAAY,CAAC;IAC9D;IACA,MAAM;MAAEE;IAAM,CAAC,GAAGD,GAAG,CAACH,IAAI;IAC1B;IACAK,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,KAAK,CAAC;IACvC;IACAhB,WAAW,CAACgB,KAAK,CAAC;IAClB;IACA,MAAMG,OAAO,GAAGlB,UAAU,CAACe,KAAK,CAAC;IACjC;IACAX,QAAQ,CAAC;MACPG,IAAI,EAAET,gBAAgB;MACtBU,OAAO,EAAEU;IACX,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOT,GAAG,EAAE;IACZL,QAAQ,CAAC;MACPG,IAAI,EAAEV,UAAU;MAChBW,OAAO,EAAEC,GAAG,CAACC,QAAQ,CAACC;IACxB,CAAC,CAAC;EACJ;AACF,CAAC;AAED,OAAO,MAAMQ,MAAM,GAAGA,CAAA,KAAMf,QAAQ,IAAI;EACtCY,YAAY,CAACI,UAAU,CAAC,UAAU,CAAC;EACnCrB,WAAW,CAAC,KAAK,CAAC;EAClBK,QAAQ,CAAC;IACPG,IAAI,EAAET,gBAAgB;IACtBU,OAAO,EAAE,CAAC;EACZ,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}